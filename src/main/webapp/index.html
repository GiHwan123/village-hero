<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<!-- 지도 API include -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=c2c65e47ff9efd53c90ebd6f14d04ecb&libraries=services,clusterer,drawing"></script>	
</head>
<body>
	<div id="map" style="width:500px;height:400px;"></div>
	<button type="button" onclick="getCurrentPosBtn()">내위치</button>
	
	<script>
		var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
		var options = { //지도를 생성할 때 필요한 기본 옵션
			center: new kakao.maps.LatLng(33.450701, 126.570667), //지도의 중심좌표.
			level: 3 //지도의 레벨(확대, 축소 정도)
		};
	
		var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴

		// 주소-좌표 변환 객체 생성
		var geocoder = new kakao.maps.services.Geocoder();


		// 주소로 좌표 검색
		geocoder.addressSearch("대구광역시 북구 대현남로 25", function(result, status){
			// 정상적으로 주소가 검색됐으면
			if (status === kakao.maps.services.Status.OK) {

				var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
				console.log(coords);
		
				// 결과값으로 받은 위치를 마커로 표시합니다
				var marker = new kakao.maps.Marker({
					map: map,
					position: coords
				});
		
				// 인포윈도우로 장소에 대한 설명을 표시합니다
				var infowindow = new kakao.maps.InfoWindow({
					content: '<div style="width:150px;text-align:center;padding:6px 0;">우리집</div>'
				});
				infowindow.open(map, marker);
		
				// 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
				map.setCenter(coords);
			} 
		});    	
		
		
		function locationLoadSuccess(pos){
		    // 현재 위치 받아오기
		    var currentPos = new kakao.maps.LatLng(pos.coords.latitude,pos.coords.longitude);

		    // 지도 이동(기존 위치와 가깝다면 부드럽게 이동)
		    map.panTo(currentPos);

		    // 마커 생성
		    var marker = new kakao.maps.Marker({
		        position: currentPos
		    });

		    // 기존에 마커가 있다면 제거
		    marker.setMap(null);
		    marker.setMap(map);
		};

		function locationLoadError(pos){
		    alert('위치 정보를 가져오는데 실패했습니다.');
		};

		// 위치 가져오기 버튼 클릭시
		function getCurrentPosBtn(){
		    navigator.geolocation.getCurrentPosition(locationLoadSuccess,locationLoadError);
		};
	</script>
	
</body>
</html>