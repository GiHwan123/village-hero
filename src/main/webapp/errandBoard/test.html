<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<body>
<div id="body">
	<a href="registration.html">심부름 요청하기</a>
	<button @click="get()">errands 출력</button><br>
	<button @click="getPayDesc()">errands 내림차순 출력</button><br>
	<button @click="cancel()">접기</button><br>
	<button @click="session()">세션값 저장</button>
	<table v-if="resData">
		<tr>
			<th>errandId</th>
			<th>writer</th>
			<th>pay</th>
			<th>createdAt</th>
			<th>title</th>
			<th>content</th>
			<th>category</th>
			<th>reqLocation</th>
			<th>reqDate</th>
			<th>errandStatus</th>
		</tr>
		<tr v-for="v in errands">
			<td>{{v.errandId}}</td>
			<td>{{v.writer}}</td>
			<td>{{v.pay}}</td>
			<td>{{v.createdAt}}</td>
			<td>{{v.title}}</td>
			<td>{{v.content}}</td>
			<td>{{v.category}}</td>
			<td>{{v.reqlocation}}</td>
			<td>{{v.reqDate}}</td>
			<td>{{v.errandStatus}}</td>
		</tr>
	</table>
	<a href="sessiontracking/sessionTest2">2-2. @SessionAttributes 이해하기 </a>
</div>

	<script>
	new Vue({
        el:"#body",
        data : {
        	resData : false,
        	errands :[]
        },
        methods :{
        	get : function(){
        		axios({
                    method : "get",
                    url : "http://localhost:8088/errands"
                }).then( resData => {
                	this.resData=true;
                    return this.errands = resData.data;
                }).catch(errorData => {
                	return console.log(errorData);
                })
        	},
        	getPayDesc : function(){
        		axios({
                    method : "get",
                    url : "http://localhost:8088/payerrands"
                }).then( resData => {
                	this.resData=true;
                    return this.errands = resData.data;
                }).catch(errorData => {
                	return console.log(errorData);
                })
        	},
        	cancel : function(){
        		axios({
        			method : "get",
        			url : "http://localhost:8088"
        		}).then( resData =>{
        			this.resData=false;
        		}).catch(errorData =>{
        			return console.log(errorData);
        		})
        	},
        	session : function(){
        		axios({
        			method : "get",
        			url : "http://localhost:8088/"
        		}).then( resData =>{
        			this.resData=false;
        		}).catch(errorData =>{
        			return console.log(errorData);
        		})
        	},
        }
        	
        	
    })
	</script>
</body>
</html>